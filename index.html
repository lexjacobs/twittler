<!DOCTYPE html>
<html>

<head>
  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>
</head>

<body>
  <script>
    // this prints the initial set of tweets:
    $(document).ready(function () {
      var $body = $('body');
      $body.html('');

      var tweetsPrinted = 0;

      var tweetChecker = function () {
        var totalTweets = streams.home.length; // to check for new tweets
        console.log(totalTweets);
        if (tweetsPrinted !== totalTweets) {
          tweetDiff = totalTweets - tweetsPrinted;
          tweetsPrinted = totalTweets;
          while (tweetDiff > 0) {
            var index = streams.home.length - tweetDiff;
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.text(streams.home.indexOf(tweet) + '@' + tweet.user + ': ' + tweet.message + " at: " + tweet.created_at);
            $tweet.prependTo($body);
            tweetDiff -= 1;
          }
        }
      }

      // this section checks for new tweets and prints only the new tweets
      tweetChecker();
      setInterval(tweetChecker, 3000);
    });
  </script>
</body>

</html>
